{"version":3,"sources":["constant.js","views/news/addNews.js"],"names":["baseUrl","img_url","AddNews","history","useHistory","useState","title","content","image","news","setNews","options","headers","localStorage","getItem","setImage","onInputChange","e","target","name","value","onInputChange1","a","console","log","files","FileReader","reader","readAsDataURL","onload","warn","result","uploadImage","axios","post","CONSTANT","res","data","code","toast","message","onSubmit","preventDefault","setTimeout","push","className","type","placeholder","onChange","onClick"],"mappings":"6KAAA,oEAAO,IAAMA,EAAW,yBAGXC,EAAU,2B,4JCwFRC,UAtFC,WACd,IAAIC,EAAUC,cADM,EAEIC,mBAAS,CAC/BC,MAAO,GACPC,QAAS,GACTC,MAAO,KALW,mBAEbC,EAFa,KAEPC,EAFO,KAOdC,EAAU,CACdC,QAAS,CAAC,MAASC,aAAaC,QAAQ,WARtB,EAUMT,mBAAS,IAVf,mBAUbG,EAVa,KAUNO,EAVM,KAYZT,EAAmBG,EAAnBH,MAAOC,EAAYE,EAAZF,QACTS,EAAgB,SAAAC,GACpBP,EAAQ,2BAAKD,GAAN,kBAAaQ,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,UAEzCC,EAAc,uCAAG,WAAMJ,GAAN,eAAAK,EAAA,6DACrBC,QAAQC,IAAI,gBAAkBP,EAAEC,OAAOO,MAAM,IADxB,SAGF,IAAIC,WAHF,QAGjBC,EAHiB,QAIdC,cAAcX,EAAEC,OAAOO,MAAM,IACpCE,EAAOE,OAAS,WACdN,QAAQO,KAAK,mBAAmBH,EAAOI,QACvChB,EAAS,CAACP,MAAMmB,EAAOI,UAPJ,2CAAH,sDAYdC,EAAW,uCAAG,WAAMf,GAAN,eAAAK,EAAA,6DAClBC,QAAQC,IAAI,QAAShB,GADH,SAEAyB,IAAMC,KAAN,UAAcC,IAAd,2BAAyD3B,EAAOG,GAFhE,UAEZyB,EAFY,OAGlBb,QAAQC,IAAI,MAAOY,GACE,KAAjBA,EAAIC,KAAKC,KAJK,wBAKhBC,YAAMH,EAAIC,KAAKG,SACfjB,QAAQO,KAAKM,EAAIC,KAAKA,KAAKA,MANX,UAOV3B,EAAQ,2BAAKD,GAAN,IAAYD,MAAO4B,EAAIC,KAAKA,QAPzB,4CAAH,sDAYXI,EAAQ,uCAAG,WAAMxB,GAAN,eAAAK,EAAA,6DACfL,EAAEyB,iBACFnB,QAAQO,KAAK,WAAYrB,GAFV,SAGEwB,IAAMC,KAAN,UAAcC,IAAd,mBAAiD1B,EAAME,GAHzD,OAGTyB,EAHS,OAIfG,YAAMH,EAAIC,KAAKG,SACfG,YAAW,WAAWxC,EAAQyC,KAAK,WAAa,KALjC,2CAAH,sDAQd,OACE,sBAAKC,UAAU,YAAf,UACE,sBAAKA,UAAU,0BAAf,UACE,oBAAIA,UAAU,mBAAd,wBACA,uBAAMJ,SAAU,SAAAxB,GAAC,OAAIwB,EAASxB,IAA9B,UACE,qBAAK4B,UAAU,aAAf,SACE,uBACEC,KAAK,OACLD,UAAU,+BACVE,YAAY,cACZ5B,KAAK,QACLC,MAAOd,EACP0C,SAAU,SAAA/B,GAAC,OAAID,EAAcC,QAGjC,qBAAK4B,UAAU,aAAf,SACE,uBACEC,KAAK,OACLD,UAAU,+BACVE,YAAY,qBACZ5B,KAAK,UACLC,MAAOb,EACPyC,SAAU,SAAA/B,GAAC,OAAID,EAAcC,QAGjC,gCAAK,uBAAO6B,KAAK,OAAO3B,KAAK,OAAO6B,SAAU,SAAA/B,GAAC,OAAII,EAAeJ,MAChE,wBAAQ6B,KAAK,SAASD,UAAU,kBAAkBI,QAAS,SAAAhC,GAAC,OAAIe,EAAYf,IAA5E,uBAGF,wBAAQ4B,UAAU,4BAAlB,4BAIJ,cAAC,IAAD","file":"static/js/26.0e7f9e17.chunk.js","sourcesContent":["export const baseUrl  = \"http://3.12.65.48:3001\"\r\n// export const baseUrl  = \"http://localhost:3001\"\r\n// export const img_url = \"http://localhost:3001/\"\r\nexport const img_url = \"http://3.12.65.48:3001/\"\r\nexport const CONSTANT_NUMBER_2 = 'hello I am also a constant';","import React, { useState } from \"react\";\r\nimport axios from 'axios'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport *as  CONSTANT from '../../constant'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nconst AddNews = () => {\r\n  let history = useHistory();\r\n  const [news, setNews] = useState({\r\n    title: \"\",\r\n    content: \"\",\r\n    image: \"\"\r\n  });\r\n  const options = {\r\n    headers: {'token': localStorage.getItem('token')}\r\n  };\r\n  const [image, setImage] = useState({});\r\n\r\n  const { title, content } = news;\r\n  const onInputChange = e => {\r\n    setNews({ ...news, [e.target.name]: e.target.value });\r\n  };\r\n  const onInputChange1 = async e => {\r\n    console.log(\"onimputchenge\",  e.target.files[0] )\r\n\r\n    let reader = await new FileReader();\r\n    reader.readAsDataURL(e.target.files[0]);\r\n    reader.onload = function () {\r\n      console.warn(\"................\",reader.result)\r\n      setImage({image:reader.result })\r\n      return\r\n  };\r\n    // setImage({ image: e.target.files[0] });\r\n  };\r\n  const uploadImage = async e => {\r\n    console.log(\"image\", image)\r\n    const res = await axios.post(`${CONSTANT.baseUrl}/api/admin/upload-image`, image, options);\r\n    console.log(\"res\", res)\r\n    if (res.data.code == 200) {\r\n      toast(res.data.message);\r\n      console.warn(res.data.data.data)\r\n      await setNews({ ...news, image: res.data.data });\r\n\r\n    }\r\n  };\r\n\r\n  const onSubmit = async e => {\r\n    e.preventDefault();\r\n    console.warn(\"onsumbit\", news)\r\n    const res =await axios.post(`${CONSTANT.baseUrl}/api/admin/news`, news, options);\r\n    toast(res.data.message);\r\n    setTimeout(function(){history.push(\"/news\"); }, 1000);\r\n    \r\n  };\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"w-75 mx-auto shadow p-5\">\r\n        <h2 className=\"text-center mb-4\">Add A News</h2>\r\n        <form onSubmit={e => onSubmit(e)}>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control form-control-lg\"\r\n              placeholder=\"Enter Title\"\r\n              name=\"title\"\r\n              value={title}\r\n              onChange={e => onInputChange(e)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control form-control-lg\"\r\n              placeholder=\"Enter Your content\"\r\n              name=\"content\"\r\n              value={content}\r\n              onChange={e => onInputChange(e)}\r\n            />\r\n          </div>\r\n          <div><input type=\"file\" name=\"file\" onChange={e => onInputChange1(e)} />\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={e => uploadImage(e)}>Upload</button>\r\n\r\n          </div>\r\n          <button className=\"btn btn-primary btn-block\">Add User</button>\r\n        </form>\r\n\r\n      </div>\r\n      <ToastContainer/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddNews;"],"sourceRoot":""}